databaseChangeLog:
-changeSet:
  id: 01-create-table-cinema
  author: root
changes:
  -createTable:
    tableName: countries
    columns:
      -column:
        name: id
        type: bigint
        autoIncrement: true
        constrains:
          primaryKey: true
          nullable: false
                      - column:
                      name: name
                      type: varchar(255)
                      constraints:
                        nullable: false
                                    - createTable:
                                    tableName: actors
                                    columns:
                                      - column:
                                          name: id
                                          type: bigint
                                          autoIncrement: true
                                          constraints:
                                            primaryKey: true
                                            nullable: false
                                      - column:
                                          name: name
                                          type: varchar(255)
                                      - column:
                                          name: country_id
                                          type: bigint
                                          constraints:
                                            foreignKeyName: actors_countries_fk
                                            references: countries(id)
                                            -createTable:
                                              tableName: movies
                                              columns:
                                                -column:
                                                  name: id
                                                  type: bigint
                                                  autoIncrement: true
                                                  constrains:
                                                    primaryKey: true
                                                    nullable: false
                                                                - column:
                                                                name: title
                                                                type: varchar(255)
                                                                constraints:
                                                                  nullable: false
                                                                              - createTable:
                                                                              tableName: movies_actors
                                                                              columns:
                                                                                - column:
                                                                                    name: movie_id
                                                                                    type: bigint
                                                                                    constraints:
                                                                                      foreignKeyName: movie_fk
                                                                                      references: movies(id)
                                                                                      nullable: false
                                                                                - column:
                                                                                    name: actor_id
                                                                                    type: bigint
                                                                                    constraints:
                                                                                      foreignKeyName: actor_fk
                                                                                      references: actors(id)
                                                                                      nullable: false